<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UPnPsdk: Socket module</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">UPnPsdk<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Universal Plug and Play +, Software Developement Kit</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('db/d86/group__upnplib-socket.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Socket module<div class="ingroups"><a class="el" href="../../d4/d32/group__upnplib.html">object oriented UPnP library</a> &raquo; <a class="el" href="../../dd/df8/group__upnplib-Addressing.html">Step 0: Addressing</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>The socket module contains all classes and free functions to manage network sockets.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d84/classupnplib_1_1CSocket__basic.html">upnplib::CSocket_basic</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get information from a raw network socket file descriptor.  <a href="../../db/d84/classupnplib_1_1CSocket__basic.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d73/classupnplib_1_1CSocket.html">upnplib::CSocket</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage all aspects of a network socket.  <a href="../../d8/d73/classupnplib_1_1CSocket.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dd2/classupnplib_1_1CSocketErr.html">upnplib::CSocketErr</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for portable handling of network socket errors.  <a href="../../d2/dd2/classupnplib_1_1CSocketErr.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/classupnplib_1_1anonymous__namespace_02global_8cpp_03_1_1CWSAStartup.html">upnplib::anonymous_namespace{global.cpp}::CWSAStartup</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize and cleanup Microsoft Windows Sockets.  <a href="../../de/d4a/classupnplib_1_1anonymous__namespace_02global_8cpp_03_1_1CWSAStartup.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga99c7777de5a847f201f6d2f66540a535" id="r_ga99c7777de5a847f201f6d2f66540a535"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d86/group__upnplib-socket.html#ga99c7777de5a847f201f6d2f66540a535">upnplib::anonymous_namespace{socket.cpp}::getsockname</a> (SOCKET a_sockfd, sockaddr *a_addr, socklen_t *a_addrlen)</td></tr>
<tr class="memdesc:ga99c7777de5a847f201f6d2f66540a535"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper for the ::getsockname() system function.  <br /></td></tr>
<tr class="separator:ga99c7777de5a847f201f6d2f66540a535"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gac0b5c6476bc3668768820c4ecfc625a4" id="r_gac0b5c6476bc3668768820c4ecfc625a4"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../de/d4a/classupnplib_1_1anonymous__namespace_02global_8cpp_03_1_1CWSAStartup.html">CWSAStartup</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d86/group__upnplib-socket.html#gac0b5c6476bc3668768820c4ecfc625a4">upnplib::anonymous_namespace{global.cpp}::init_winsock</a></td></tr>
<tr class="memdesc:gac0b5c6476bc3668768820c4ecfc625a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This object initialize and cleanup the Microsoft Windows Socket subsystem.  <br /></td></tr>
<tr class="separator:gac0b5c6476bc3668768820c4ecfc625a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The socket module contains all classes and free functions to manage network sockets. </p>
<p><a class="anchor" id="socket_module"></a>This module mainly consists of the CSocket class but also provides free functions to manage a socket. The problem is that socket handling isn't very good portable. There is different behavior on the supported platforms Unix, MacOS and Microsoft Windows. The CSocket class atempts to be consistent portable on all three platforms by using common behavior or by emulating missing functions on a platform.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Specification for CSocket</h1>
<p>The class encapsulates and manages one raw socket file descriptor. The file descriptor of a valid socket object cannot be changed but the object with its immutable file descriptor can be moved and assigned to another socket object. Copying a socket object isn't supported because having two objects with the same file descriptor may be very error prone in particular with multithreading. Effort has been taken to do not cache any socket information outside the socket file descriptor. All socket informations are direct set and get to/from the operating system with the file descriptor. The socket file descriptor is always valid except on an empty socket object.</p>
<p><a class="anchor" id="empty_socket"></a></p>
<h2><a class="anchor" id="autotoc_md1"></a>
empty socket object</h2>
<p>An empty socket object can be instantiated with the default constructor, e.g. <code>CSocket sockObj;</code>. It is a valid object and should be destructed. When moving a socket object, the left over source object is also empty. An empty socket object has an <code>INVALID_SOCKET</code> defined and no valid content. It throws an exception if using any of its Setter and Getter. Moving and assigning it is possible. You can test for an empty socket by looking for an <code>INVALID_SOCKET</code>, e.g. </p><div class="fragment"><div class="line">CSocket sockObj; <span class="comment">// or CSocket_basic sockObj;</span></div>
<div class="line"><span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span>SOCKET<span class="keyword">&gt;</span>(sockObj) != INVALID_SOCKET) {</div>
<div class="line">    in_port_t port = sockObj.get_port(); };</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2"></a>
protocol family</h2>
<p>Only protocol family <code>PF_INET6</code> and <code>PF_INET</code> is supported. Any other address family throws an exception.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
socket type</h2>
<p>Only <code>SOCK_STREAM</code> and <code>SOCK_DGRAM</code> is supported. Any other type throws an exception.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
valid socket file descriptor</h2>
<p>I get this from the C standard library function: <code>int ::socket(address_family, socket_type, protocol)</code>. Other arguments than address family and socket type are not accepted. For the protocol argument is always the default one used that is internal hard coded with argument 0.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
options SO_REUSEADDR and SO_EXCLUSIVEADDRUSE</h2>
<p>I don't set the option to immediately reuse an address and I always set the option <code>SO_EXCLUSIVEADDRUSE</code> on Microsoft Windows. For more details of this have a look at <a class="el" href="../../index.html#overview_reuseaddr">Socket option &quot;reuse address&quot;</a>.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
References</h2>
<ul>
<li><a href="https://www.rfc-editor.org/rfc/rfc3493">RFC 3493</a> - Basic Socket Interface Extensions for IPv6</li>
<li><a href="https://www.rfc-editor.org/rfc/rfc3542">RFC 3542</a> - Advanced Sockets Application Program Interface (API) for IPv6 </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga99c7777de5a847f201f6d2f66540a535" name="ga99c7777de5a847f201f6d2f66540a535"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga99c7777de5a847f201f6d2f66540a535">&#9670;&#160;</a></span>getsockname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int upnplib::anonymous_namespace{socket.cpp}::getsockname </td>
          <td>(</td>
          <td class="paramtype">SOCKET&#160;</td>
          <td class="paramname"><em>a_sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sockaddr *&#160;</td>
          <td class="paramname"><em>a_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t *&#160;</td>
          <td class="paramname"><em>a_addrlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper for the ::getsockname() system function. </p>
<p>The system function ::getsockname() behaves different on different platforms in particular with error handling on Microsoft Windows. This function provides a portable version. The calling options are the same as documented for the system function. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d81/socket_8cpp_source.html#l00033">33</a> of file <a class="el" href="../../d8/d81/socket_8cpp_source.html">socket.cpp</a>.</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../db/d86/group__upnplib-socket_ga99c7777de5a847f201f6d2f66540a535_cgraph.png" border="0" usemap="#adb/d86/group__upnplib-socket_ga99c7777de5a847f201f6d2f66540a535_cgraph" alt=""/></div>
<map name="adb/d86/group__upnplib-socket_ga99c7777de5a847f201f6d2f66540a535_cgraph" id="adb/d86/group__upnplib-socket_ga99c7777de5a847f201f6d2f66540a535_cgraph">
<area shape="rect" title="Wrapper for the ::getsockname() system function." alt="" coords="5,29,177,84"/>
<area shape="poly" title=" " alt="" coords="57,29,57,19,63,10,75,5,91,3,111,6,122,13,119,18,109,11,91,8,76,10,67,15,63,21,63,29"/>
</map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../db/d86/group__upnplib-socket_ga99c7777de5a847f201f6d2f66540a535_icgraph.png" border="0" usemap="#adb/d86/group__upnplib-socket_ga99c7777de5a847f201f6d2f66540a535_icgraph" alt=""/></div>
<map name="adb/d86/group__upnplib-socket_ga99c7777de5a847f201f6d2f66540a535_icgraph" id="adb/d86/group__upnplib-socket_ga99c7777de5a847f201f6d2f66540a535_icgraph">
<area shape="rect" title="Wrapper for the ::getsockname() system function." alt="" coords="5,29,177,84"/>
<area shape="poly" title=" " alt="" coords="119,18,109,11,91,8,76,10,67,15,63,21,63,29,57,29,57,19,63,10,75,5,91,3,111,6,122,13"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gac0b5c6476bc3668768820c4ecfc625a4" name="gac0b5c6476bc3668768820c4ecfc625a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac0b5c6476bc3668768820c4ecfc625a4">&#9670;&#160;</a></span>init_winsock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../de/d4a/classupnplib_1_1anonymous__namespace_02global_8cpp_03_1_1CWSAStartup.html">CWSAStartup</a> upnplib::anonymous_namespace{global.cpp}::init_winsock</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This object initialize and cleanup the Microsoft Windows Socket subsystem. </p>

<p class="definition">Definition at line <a class="el" href="../../db/d7d/global_8cpp_source.html#l00108">108</a> of file <a class="el" href="../../db/d7d/global_8cpp_source.html">global.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
