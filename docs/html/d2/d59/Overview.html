<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UPnPlib: Overview</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">UPnPlib<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">&#39;Universal Plug and Play plus&#39; System Developement Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Overview</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#overview">Overview</a><ul><li class="level2"><a href="#parts">Parts &#39;Control Point&#39; and &#39;UPnP Device&#39;</a></li>
<li class="level2"><a href="#overview_comp">Main Components</a></li>
<li class="level2"><a href="#noexcept">Promise to throw &quot;no exception&quot;</a></li>
<li class="level2"><a href="#overview_reuseaddr">Socket option &quot;reuse address&quot;</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>General information to the library, its structure and requirements.</p>
<h1><a class="anchor" id="overview"></a>
Overview</h1>
<hr  />
<h2><a class="anchor" id="parts"></a>
Parts 'Control Point' and 'UPnP Device'</h2>
<p>The library has two parts, handling Control Points or UPnP Devices. They are largely independent of each other. You can compile both parts separately so you have a library that only handle Control Points or UPnP Devices. That make sense for installations that are only a Control Point or only a UPnP Device and is of particular interest for embedded devices. Of course you can also have both parts for hybrid applications.</p>
<h2><a class="anchor" id="overview_comp"></a>
Main Components</h2>
<p>The <b>S</b>oftware <b>D</b>evelopment <b>K</b>it contains some main components that are associated with a specific step of the <a href="../../UPnP-arch-DeviceArchitecture-v2.0-20200417.pdf">UPnPâ„¢ Device Architecture 2.0</a>.<br  />
 These components are:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">order   </th><th class="markdownTableHeadNone">component   </th><th class="markdownTableHeadNone">part of    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyNone">miniserver   </td><td class="markdownTableBodyNone">Step 0: Addressing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyNone">webserver   </td><td class="markdownTableBodyNone">Step 1: Discovery    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">3   </td><td class="markdownTableBodyNone">SSDP   </td><td class="markdownTableBodyNone">Step 1: Discovery    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">4   </td><td class="markdownTableBodyNone">SOAP   </td><td class="markdownTableBodyNone">Step 3: Control    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">5   </td><td class="markdownTableBodyNone">GENA   </td><td class="markdownTableBodyNone">Step 4: Eventing   </td></tr>
</table>
<p>The order shows the dependency. Each component depends on its predecessor. For example if selecting SSDP on configuring to compile, this selects also automatically the webserver (only that) and the webserver selects miniserver. If you select GENA for compiling you have a full featured configuration with all main components. There is no need to select previous moduls. Also the abstraction will increase with the order. For example no component except miniserver will handle network sockets.</p>
<dl class="section note"><dt>Note</dt><dd>This order is an important implicit dependency. It is always expected that it is respected. No internal checks are made about this. The compiler will remind you if you forget it.</dd></dl>
<h2><a class="anchor" id="noexcept"></a>
Promise to throw "no exception"</h2>
<p>There are several functions and methods that are specified to <a href="https://en.cppreference.com/w/cpp/language/noexcept_spec"><b>noexcept</b></a>. This may not always be true with debugging or TRACE enabled because there we have extended use of std::string objects for output to std::cerr. Both may throw exceptions in rare cases like exceeding max. length of a std::string or error on memory allocation or modified output flags of the std::cerr output stream by the program using the library. The result of such an unexpected exception is the immediate termination of the program as specified for <b>noexcept</b>. But I assume that this is only a temporary setting and is under special observation by the developer so that he can evaluate these exceptions.</p>
<h2><a class="anchor" id="overview_reuseaddr"></a>
Socket option "reuse address"</h2>
<p>There is an issue when a network connection unexpectedly dies. The port then has normaly to <code>TIME_WAIT</code> util it can use its old <a class="el" href="../../d5/d67/Glossary.html#glossary_netaddr">netaddress</a> again. This may not be acceptable for certain server applications. So there is a socket option <code>SO_REUSEADDR</code> to immediately reuse a given netaddress, but with the risk of network errors and security issues. For more details have a look at <a href="https://hea-www.harvard.edu/~fine/Tech/addrinuse.html">Bind: Address Already in Use</a>.</p>
<p>I don't set the option to immediately reuse an address of a local connected socket after the connection closed unexpectedly. Instead I respect the <code>TIME_WAIT</code>. For an immediate reconnection I use a new address. A new <a class="el" href="../../d5/d67/Glossary.html#glossary_netaddr">netaddress</a> is already given with a changed port so I just use the same ip address with another port. I always reset <code>SO_REUSEADDR</code> with constructing a socket object on all platforms.</p>
<p>A TIME_WAIT is not necessary if the remote control point closes the connection. Upnplib uses the protocol to signal the remote control point to shutdown the connection if it support it.</p>
<p>This is unclear on Microsoft Windows. <b>THERE WE HAVE AN IMPORTANT SECURITY ISSUE!</b><br  />
In the past Windows had a very bad network security on low level socket handling as documented at <a href="https://learn.microsoft.com/en-us/windows/win32/winsock/using-so-reuseaddr-and-so-exclusiveaddruse">Using SO_REUSEADDR and SO_EXCLUSIVEADDRUSE</a>. Microsoft has fixed this since Windows Server 2003. The network stack now behaves like it does by default on other platforms. Strangely, they call it advanced security, which is standard on other major operating systems. But this isn't done by default. The developer has to take this into account by using the socket option SO_EXCLUSIVEADDRUSE. I always set this option with constructing a socket object on a WIN32 platform. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
