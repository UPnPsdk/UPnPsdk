<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UPnPsdk: Compa/src/genlib/miniserver/miniserver.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">UPnPsdk<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Universal Plug and Play +, Software Development Kit</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d5/db2/miniserver_8cpp.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">miniserver.cpp File Reference<div class="ingroups"><a class="el" href="../../d5/dbb/group__compa.html">compatible UPnP SDK</a> &raquo; <a class="el" href="../../d3/d94/group__compa-Addressing.html">Step 0: Addressing</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Implements the functionality and utility functions used by the Miniserver module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="../../d3/d8b/miniserver_8hpp_source.html">miniserver.hpp</a>&gt;</code><br />
<code>#include &lt;httpreadwrite.hpp&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d0/d19/ssdp__common_8hpp_source.html">ssdp_common.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d9/df0/statcodes_8hpp_source.html">statcodes.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d3/da9/upnpapi_8hpp_source.html">upnpapi.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../da/dfc/socket_8hpp_source.html">UPnPsdk/socket.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d1/d3b/synclog_8hpp_source.html">UPnPsdk/synclog.hpp</a>&gt;</code><br />
<code>#include &lt;umock/sys_socket.hpp&gt;</code><br />
<code>#include &lt;umock/winsock2.hpp&gt;</code><br />
<code>#include &lt;umock/stdlib.hpp&gt;</code><br />
<code>#include &lt;umock/pupnp_miniserver.hpp&gt;</code><br />
<code>#include &lt;umock/pupnp_ssdp.hpp&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for miniserver.cpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d7/d5d/miniserver_8cpp__incl.png" border="0" usemap="#aCompa_2src_2genlib_2miniserver_2miniserver_8cpp" alt=""/></div>
<map name="aCompa_2src_2genlib_2miniserver_2miniserver_8cpp" id="aCompa_2src_2genlib_2miniserver_2miniserver_8cpp">
<area shape="rect" title="Implements the functionality and utility functions used by the Miniserver module." alt="" coords="533,5,743,45"/>
<area shape="rect" href="../../d3/d8b/miniserver_8hpp.html" title="Manage &quot;Step 0: Addressing&quot; of the UPnP+™ specification." alt="" coords="181,167,300,192"/>
<area shape="poly" title=" " alt="" coords="533,40,394,62,333,77,291,96,278,108,266,123,251,155,246,153,262,120,274,104,289,91,331,72,392,56,533,35"/>
<area shape="rect" href="../../da/dfc/socket_8hpp.html" title="Socket Module: manage properties and methods but not connections of ONE network socket to handle IPv4..." alt="" coords="5,240,159,265"/>
<area shape="poly" title=" " alt="" coords="533,34,400,43,255,56,135,73,94,84,73,95,64,109,58,125,56,161,63,196,73,226,68,228,58,198,51,161,53,124,59,107,70,91,92,79,134,68,255,50,399,37,533,29"/>
<area shape="rect" href="../../d1/d3b/synclog_8hpp.html" title="Define macro for synced logging to the console for detailed info and debug." alt="" coords="180,313,341,339"/>
<area shape="poly" title=" " alt="" coords="582,48,542,68,505,95,487,117,475,139,463,181,450,224,437,246,417,267,376,294,332,312,330,307,374,290,414,263,433,242,445,222,458,180,470,137,482,114,501,91,539,63,580,43"/>
<area shape="rect" title=" " alt="" coords="302,93,441,119"/>
<area shape="poly" title=" " alt="" coords="575,48,424,92,423,87,573,43"/>
<area shape="rect" href="../../d0/d19/ssdp__common_8hpp.html" title="Manage &quot;Step 1: Discovery&quot; of the UPnP+™ specification with SSDP." alt="" coords="83,93,227,119"/>
<area shape="poly" title=" " alt="" coords="534,46,239,94,238,89,533,41"/>
<area shape="rect" href="../../d9/df0/statcodes_8hpp.html" title="HTTP status codes." alt="" coords="516,93,629,119"/>
<area shape="poly" title=" " alt="" coords="624,47,593,84,589,81,620,44"/>
<area shape="rect" href="../../d3/da9/upnpapi_8hpp.html" title="Inititalize the compatible library before it can be used." alt="" coords="653,93,756,119"/>
<area shape="poly" title=" " alt="" coords="656,44,688,81,684,84,652,47"/>
<area shape="rect" title=" " alt="" coords="780,93,949,119"/>
<area shape="poly" title=" " alt="" coords="693,43,819,86,818,91,691,48"/>
<area shape="rect" title=" " alt="" coords="973,93,1132,119"/>
<area shape="poly" title=" " alt="" coords="738,43,979,88,978,93,737,48"/>
<area shape="rect" title=" " alt="" coords="1156,93,1291,119"/>
<area shape="poly" title=" " alt="" coords="743,37,1143,90,1142,96,743,43"/>
<area shape="rect" title=" " alt="" coords="1315,93,1529,119"/>
<area shape="poly" title=" " alt="" coords="743,34,1301,90,1301,95,743,40"/>
<area shape="rect" title=" " alt="" coords="1553,93,1728,119"/>
<area shape="poly" title=" " alt="" coords="743,30,1092,54,1540,90,1539,96,1092,59,743,36"/>
<area shape="rect" href="../../df/d6f/Compa_2src_2inc_2httpparser_8hpp.html" title="Functions to parse UPnP messages like requests and responses." alt="" coords="183,240,299,265"/>
<area shape="poly" title=" " alt="" coords="243,192,243,226,238,226,238,192"/>
<area shape="rect" href="../../d6/df0/sock_8hpp.html" title="Manage network sockets and connections." alt="" coords="323,240,403,265"/>
<area shape="poly" title=" " alt="" coords="262,190,333,231,330,235,259,194"/>
<area shape="poly" title=" " alt="" coords="216,194,121,237,119,232,214,190"/>
<area shape="poly" title=" " alt="" coords="112,263,220,306,218,311,110,268"/>
<area shape="poly" title=" " alt="" coords="171,117,218,156,215,160,167,121"/>
<area shape="rect" href="../../d0/d21/visibility_8hpp.html" title="Macros to support visibility of external symbols." alt="" coords="502,167,667,192"/>
<area shape="poly" title=" " alt="" coords="577,119,583,153,578,154,572,119"/>
<area shape="rect" href="../../d6/d92/VirtualDir_8hpp.html" title="Provide the Virtual Directory Callbacks structure." alt="" coords="692,167,803,192"/>
<area shape="poly" title=" " alt="" coords="714,118,736,154,731,156,709,120"/>
<area shape="rect" href="../../d9/d78/client__table_8hpp.html" title=" " alt="" coords="827,167,953,192"/>
<area shape="poly" title=" " alt="" coords="735,116,848,159,846,164,733,121"/>
</map>
</div>
</div>
<p><a href="../../d5/db2/miniserver_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:dd/d1f/structanonymous__namespace_02miniserver_8cpp_03_1_1mserv__request__t" id="r_dd/d1f/structanonymous__namespace_02miniserver_8cpp_03_1_1mserv__request__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#dd/d1f/structanonymous__namespace_02miniserver_8cpp_03_1_1mserv__request__t">anonymous_namespace{miniserver.cpp}::mserv_request_t</a></td></tr>
<tr class="memdesc:dd/d1f/structanonymous__namespace_02miniserver_8cpp_03_1_1mserv__request__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">miniserver received request message.  <a href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#dd/d1f/structanonymous__namespace_02miniserver_8cpp_03_1_1mserv__request__t">More...</a><br /></td></tr>
<tr class="separator:dd/d1f/structanonymous__namespace_02miniserver_8cpp_03_1_1mserv__request__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a9b0e6da1017a752fb8bc9546a048afff" id="r_a9b0e6da1017a752fb8bc9546a048afff"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a9b0e6da1017a752fb8bc9546a048afff">anonymous_namespace{miniserver.cpp}::MiniServerState</a> { <a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a9b0e6da1017a752fb8bc9546a048afffa5c1b6c12e057bcaf7187b7a3d9765b15">anonymous_namespace{miniserver.cpp}::MSERV_IDLE</a>
, <a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a9b0e6da1017a752fb8bc9546a048afffa23b6f8b180edd0e4c6259a63f610bb71">anonymous_namespace{miniserver.cpp}::MSERV_RUNNING</a>
, <a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a9b0e6da1017a752fb8bc9546a048afffa664303d9a0b13054c9c77545d2ce53f5">anonymous_namespace{miniserver.cpp}::MSERV_STOPPING</a>
 }</td></tr>
<tr class="memdesc:a9b0e6da1017a752fb8bc9546a048afff"><td class="mdescLeft">&#160;</td><td class="mdescRight">miniserver state  <a href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a9b0e6da1017a752fb8bc9546a048afff">More...</a><br /></td></tr>
<tr class="separator:a9b0e6da1017a752fb8bc9546a048afff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a569fe15e9cbb156f31065a8b7ac12799" id="r_a569fe15e9cbb156f31065a8b7ac12799"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db2/miniserver_8cpp.html#a569fe15e9cbb156f31065a8b7ac12799">SetSoapCallback</a> (<a class="el" href="../../d3/d8b/miniserver_8hpp.html#a3f28f3a60a8a50e6fb3a27904c32dde6">MiniServerCallback</a> callback)</td></tr>
<tr class="memdesc:a569fe15e9cbb156f31065a8b7ac12799"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set SOAP Callback.  <br /></td></tr>
<tr class="separator:a569fe15e9cbb156f31065a8b7ac12799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af500b18ad2a00dd3c3fa6da8ce62369d" id="r_af500b18ad2a00dd3c3fa6da8ce62369d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db2/miniserver_8cpp.html#af500b18ad2a00dd3c3fa6da8ce62369d">SetGenaCallback</a> (<a class="el" href="../../d3/d8b/miniserver_8hpp.html#a3f28f3a60a8a50e6fb3a27904c32dde6">MiniServerCallback</a> callback)</td></tr>
<tr class="memdesc:af500b18ad2a00dd3c3fa6da8ce62369d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set GENA Callback.  <br /></td></tr>
<tr class="separator:af500b18ad2a00dd3c3fa6da8ce62369d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c0b17d965bdb9430a9ce2e6931770a" id="r_a85c0b17d965bdb9430a9ce2e6931770a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db2/miniserver_8cpp.html#a85c0b17d965bdb9430a9ce2e6931770a">StartMiniServer</a> (in_port_t *listen_port4, in_port_t *listen_port6, in_port_t *listen_port6UlaGua)</td></tr>
<tr class="memdesc:a85c0b17d965bdb9430a9ce2e6931770a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the sockets functionality for the Miniserver.  <br /></td></tr>
<tr class="separator:a85c0b17d965bdb9430a9ce2e6931770a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0223038b7afa1e3ea3d7cec983ccc63" id="r_ac0223038b7afa1e3ea3d7cec983ccc63"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db2/miniserver_8cpp.html#ac0223038b7afa1e3ea3d7cec983ccc63">StopMiniServer</a> ()</td></tr>
<tr class="memdesc:ac0223038b7afa1e3ea3d7cec983ccc63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop and Shutdown the MiniServer and free socket resources.  <br /></td></tr>
<tr class="separator:ac0223038b7afa1e3ea3d7cec983ccc63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Scope restricted to file</div></td></tr>
<tr class="memitem:a0c7d26fd8adfd7e704e8502a65efae5b" id="r_a0c7d26fd8adfd7e704e8502a65efae5b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a0c7d26fd8adfd7e704e8502a65efae5b">anonymous_namespace{miniserver.cpp}::host_header_is_numeric</a> (char *a_host_port, size_t a_host_port_len)</td></tr>
<tr class="memdesc:a0c7d26fd8adfd7e704e8502a65efae5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a network address is numeric.  <br /></td></tr>
<tr class="separator:a0c7d26fd8adfd7e704e8502a65efae5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f40d51e41632f61e7147d7a42dea58e" id="r_a6f40d51e41632f61e7147d7a42dea58e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a6f40d51e41632f61e7147d7a42dea58e">anonymous_namespace{miniserver.cpp}::getNumericHostRedirection</a> (SOCKET a_socket, char *a_host_port, size_t a_hp_size)</td></tr>
<tr class="memdesc:a6f40d51e41632f61e7147d7a42dea58e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the ip address with port as text that is bound to a socket.  <br /></td></tr>
<tr class="separator:a6f40d51e41632f61e7147d7a42dea58e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54d3ff9589278aff8765d7a64df23587" id="r_a54d3ff9589278aff8765d7a64df23587"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a54d3ff9589278aff8765d7a64df23587">anonymous_namespace{miniserver.cpp}::dispatch_request</a> (<a class="el" href="../../d6/df0/sock_8hpp.html#d9/d4f/structSOCKINFO">SOCKINFO</a> *info, <a class="el" href="../../df/d6f/Compa_2src_2inc_2httpparser_8hpp.html#d7/ddd/structhttp__parser__t">http_parser_t</a> *hparser)</td></tr>
<tr class="memdesc:a54d3ff9589278aff8765d7a64df23587"><td class="mdescLeft">&#160;</td><td class="mdescRight">Based on the type of message, appropriate callback is issued.  <br /></td></tr>
<tr class="separator:a54d3ff9589278aff8765d7a64df23587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639fecba9beb576e16e842901e9c1c27" id="r_a639fecba9beb576e16e842901e9c1c27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a639fecba9beb576e16e842901e9c1c27">anonymous_namespace{miniserver.cpp}::free_handle_request_arg</a> (void *args)</td></tr>
<tr class="memdesc:a639fecba9beb576e16e842901e9c1c27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free memory assigned for handling request and unitialize socket functionality.  <br /></td></tr>
<tr class="separator:a639fecba9beb576e16e842901e9c1c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b4b32cfbe825a3f7cc9906b33d50872" id="r_a9b4b32cfbe825a3f7cc9906b33d50872"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a9b4b32cfbe825a3f7cc9906b33d50872">anonymous_namespace{miniserver.cpp}::handle_request</a> (void *args)</td></tr>
<tr class="memdesc:a9b4b32cfbe825a3f7cc9906b33d50872"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive the request and dispatch it for handling.  <br /></td></tr>
<tr class="separator:a9b4b32cfbe825a3f7cc9906b33d50872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80129c74e300de9e2a06be5067e47ae5" id="r_a80129c74e300de9e2a06be5067e47ae5"><td class="memItemLeft" align="right" valign="top">UPNP_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a80129c74e300de9e2a06be5067e47ae5">anonymous_namespace{miniserver.cpp}::schedule_request_job</a> (SOCKET a_connfd, <a class="el" href="../../dc/df7/structUPnPsdk_1_1SSockaddr.html">UPnPsdk::SSockaddr</a> &amp;clientAddr)</td></tr>
<tr class="memdesc:a80129c74e300de9e2a06be5067e47ae5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initilize the thread pool to handle an incomming request, sets priority for the job and adds the job to the thread pool.  <br /></td></tr>
<tr class="separator:a80129c74e300de9e2a06be5067e47ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a937a0eae18a69c7e034aa982345d9a50" id="r_a937a0eae18a69c7e034aa982345d9a50"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a937a0eae18a69c7e034aa982345d9a50">anonymous_namespace{miniserver.cpp}::fdset_if_valid</a> (SOCKET a_sock, fd_set *a_set)</td></tr>
<tr class="memdesc:a937a0eae18a69c7e034aa982345d9a50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a socket file descriptor to an <code>'fd_set'</code> structure as needed for <code>::select()</code>.  <br /></td></tr>
<tr class="separator:a937a0eae18a69c7e034aa982345d9a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53d1fc0751489b766ddd900c54415df7" id="r_a53d1fc0751489b766ddd900c54415df7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a53d1fc0751489b766ddd900c54415df7">anonymous_namespace{miniserver.cpp}::web_server_accept</a> (SOCKET listen_sock, fd_set &amp;set)</td></tr>
<tr class="memdesc:a53d1fc0751489b766ddd900c54415df7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accept requested connection from a remote control point and run it in a new thread.  <br /></td></tr>
<tr class="separator:a53d1fc0751489b766ddd900c54415df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02379f09474a96b3590cadd8ca82ecf1" id="r_a02379f09474a96b3590cadd8ca82ecf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a02379f09474a96b3590cadd8ca82ecf1">anonymous_namespace{miniserver.cpp}::ssdp_read</a> (SOCKET *rsock, fd_set *set)</td></tr>
<tr class="memdesc:a02379f09474a96b3590cadd8ca82ecf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from the SSDP socket.  <br /></td></tr>
<tr class="separator:a02379f09474a96b3590cadd8ca82ecf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a774280e63947d88746e7f6f8f583d759" id="r_a774280e63947d88746e7f6f8f583d759"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a774280e63947d88746e7f6f8f583d759">anonymous_namespace{miniserver.cpp}::receive_from_stopSock</a> (SOCKET ssock, fd_set *set)</td></tr>
<tr class="memdesc:a774280e63947d88746e7f6f8f583d759"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if we have received a packet that shall stop the miniserver.  <br /></td></tr>
<tr class="separator:a774280e63947d88746e7f6f8f583d759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29857662f54c55aa7e6023b37b08af76" id="r_a29857662f54c55aa7e6023b37b08af76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a29857662f54c55aa7e6023b37b08af76">anonymous_namespace{miniserver.cpp}::RunMiniServer</a> (<a class="el" href="../../d3/d8b/miniserver_8hpp.html#d2/d37/structMiniServerSockArray">MiniServerSockArray</a> *miniSock)</td></tr>
<tr class="memdesc:a29857662f54c55aa7e6023b37b08af76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the miniserver.  <br /></td></tr>
<tr class="separator:a29857662f54c55aa7e6023b37b08af76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88c84bd3f9b53e2ef2ada57dd21a73b1" id="r_a88c84bd3f9b53e2ef2ada57dd21a73b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a88c84bd3f9b53e2ef2ada57dd21a73b1">anonymous_namespace{miniserver.cpp}::RunMiniServer_f</a> (<a class="el" href="../../d3/d8b/miniserver_8hpp.html#d2/d37/structMiniServerSockArray">MiniServerSockArray</a> *miniSock)</td></tr>
<tr class="memdesc:a88c84bd3f9b53e2ef2ada57dd21a73b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a network address is numeric.  <br /></td></tr>
<tr class="separator:a88c84bd3f9b53e2ef2ada57dd21a73b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec7d02e7e42098f68ed2d85b931106df" id="r_aec7d02e7e42098f68ed2d85b931106df"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#aec7d02e7e42098f68ed2d85b931106df">anonymous_namespace{miniserver.cpp}::get_port</a> (SOCKET sockfd, uint16_t *port)</td></tr>
<tr class="memdesc:aec7d02e7e42098f68ed2d85b931106df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns port to which socket, sockfd, is bound.  <br /></td></tr>
<tr class="separator:aec7d02e7e42098f68ed2d85b931106df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7edcadd0e5ba55588d4794730343772e" id="r_a7edcadd0e5ba55588d4794730343772e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a7edcadd0e5ba55588d4794730343772e">anonymous_namespace{miniserver.cpp}::get_miniserver_sockets</a> (<a class="el" href="../../d3/d8b/miniserver_8hpp.html#d2/d37/structMiniServerSockArray">MiniServerSockArray</a> *out, in_port_t listen_port4, in_port_t listen_port6, in_port_t listen_port6UlaGua)</td></tr>
<tr class="memdesc:a7edcadd0e5ba55588d4794730343772e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create STREAM sockets, binds to local network interfaces and listens for incoming connections.  <br /></td></tr>
<tr class="separator:a7edcadd0e5ba55588d4794730343772e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eecc466ef68bcf35458b9b5c5ff4d63" id="r_a1eecc466ef68bcf35458b9b5c5ff4d63"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a1eecc466ef68bcf35458b9b5c5ff4d63">anonymous_namespace{miniserver.cpp}::get_miniserver_stopsock</a> (<a class="el" href="../../d3/d8b/miniserver_8hpp.html#d2/d37/structMiniServerSockArray">MiniServerSockArray</a> *out)</td></tr>
<tr class="memdesc:a1eecc466ef68bcf35458b9b5c5ff4d63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the miniserver STOP socket, usable to listen for stopping the miniserver.  <br /></td></tr>
<tr class="separator:a1eecc466ef68bcf35458b9b5c5ff4d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d8a62e1d3813dc7cc3bcfca83d918a5" id="r_a5d8a62e1d3813dc7cc3bcfca83d918a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a5d8a62e1d3813dc7cc3bcfca83d918a5">anonymous_namespace{miniserver.cpp}::InitMiniServerSockArray</a> (<a class="el" href="../../d3/d8b/miniserver_8hpp.html#d2/d37/structMiniServerSockArray">MiniServerSockArray</a> *miniSocket)</td></tr>
<tr class="memdesc:a5d8a62e1d3813dc7cc3bcfca83d918a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a miniserver Socket Array.  <br /></td></tr>
<tr class="separator:a5d8a62e1d3813dc7cc3bcfca83d918a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6ab69017b8af0de7bc0bfec810bbe9fb" id="r_a6ab69017b8af0de7bc0bfec810bbe9fb"><td class="memItemLeft" align="right" valign="top">in_port_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a6ab69017b8af0de7bc0bfec810bbe9fb">anonymous_namespace{miniserver.cpp}::miniStopSockPort</a></td></tr>
<tr class="memdesc:a6ab69017b8af0de7bc0bfec810bbe9fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Port of the stop socket.  <br /></td></tr>
<tr class="separator:a6ab69017b8af0de7bc0bfec810bbe9fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae413745d69678061574e39ce1949af43" id="r_ae413745d69678061574e39ce1949af43"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a9b0e6da1017a752fb8bc9546a048afff">MiniServerState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#ae413745d69678061574e39ce1949af43">anonymous_namespace{miniserver.cpp}::gMServState</a> {<a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a9b0e6da1017a752fb8bc9546a048afffa5c1b6c12e057bcaf7187b7a3d9765b15">MSERV_IDLE</a>}</td></tr>
<tr class="memdesc:ae413745d69678061574e39ce1949af43"><td class="mdescLeft">&#160;</td><td class="mdescRight">miniserver state  <br /></td></tr>
<tr class="separator:ae413745d69678061574e39ce1949af43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49eca2fd8ae56a32b6c866db4b5dcb47" id="r_a49eca2fd8ae56a32b6c866db4b5dcb47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d8b/miniserver_8hpp.html#a3f28f3a60a8a50e6fb3a27904c32dde6">MiniServerCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a49eca2fd8ae56a32b6c866db4b5dcb47">anonymous_namespace{miniserver.cpp}::gSoapCallback</a> {nullptr}</td></tr>
<tr class="memdesc:a49eca2fd8ae56a32b6c866db4b5dcb47"><td class="mdescLeft">&#160;</td><td class="mdescRight">SOAP callback.  <br /></td></tr>
<tr class="separator:a49eca2fd8ae56a32b6c866db4b5dcb47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f4c2792aee1e2df9b5ebe874b89760d" id="r_a6f4c2792aee1e2df9b5ebe874b89760d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d8b/miniserver_8hpp.html#a3f28f3a60a8a50e6fb3a27904c32dde6">MiniServerCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a6f4c2792aee1e2df9b5ebe874b89760d">anonymous_namespace{miniserver.cpp}::gGenaCallback</a> {nullptr}</td></tr>
<tr class="memdesc:a6f4c2792aee1e2df9b5ebe874b89760d"><td class="mdescLeft">&#160;</td><td class="mdescRight">GENA callback.  <br /></td></tr>
<tr class="separator:a6f4c2792aee1e2df9b5ebe874b89760d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements the functionality and utility functions used by the Miniserver module. </p>
<p>The miniserver is a central point for processing all network requests. It is made of:</p><ul>
<li>The HTTP listeners for description / control / eventing.</li>
<li>The SSDP sockets for discovery. </li>
</ul>

<p class="definition">Definition in file <a class="el" href="../../d5/db2/miniserver_8cpp_source.html">miniserver.cpp</a>.</p>
</div><hr/><h2 class="groupheader">Class Documentation</h2>
<a name="dd/d1f/structanonymous__namespace_02miniserver_8cpp_03_1_1mserv__request__t" id="dd/d1f/structanonymous__namespace_02miniserver_8cpp_03_1_1mserv__request__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#dd/d1f/structanonymous__namespace_02miniserver_8cpp_03_1_1mserv__request__t">&#9670;&#160;</a></span>anonymous_namespace{miniserver.cpp}::mserv_request_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct anonymous_namespace{miniserver.cpp}::mserv_request_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>miniserver received request message. </p>
<p>This defines the structure of a UPnP request that has income from a remote control point. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/db2/miniserver_8cpp_source.html#l00076">76</a> of file <a class="el" href="../../d5/db2/miniserver_8cpp_source.html">miniserver.cpp</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a1f7d64c469da025cbad2503f1d808de9" name="a1f7d64c469da025cbad2503f1d808de9"></a>SOCKET</td>
<td class="fieldname">
connfd</td>
<td class="fielddoc">
Connection socket file descriptor. </td></tr>
<tr><td class="fieldtype">
<a id="a950798bbf6c64b21a4c10cae2251929e" name="a950798bbf6c64b21a4c10cae2251929e"></a>sockaddr_storage</td>
<td class="fieldname">
foreign_sockaddr</td>
<td class="fielddoc">
Socket address of the remote control point. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a569fe15e9cbb156f31065a8b7ac12799" name="a569fe15e9cbb156f31065a8b7ac12799"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a569fe15e9cbb156f31065a8b7ac12799">&#9670;&#160;</a></span>SetSoapCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetSoapCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d8b/miniserver_8hpp.html#a3f28f3a60a8a50e6fb3a27904c32dde6">MiniServerCallback</a>&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set SOAP Callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>SOAP Callback to be invoked. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/db2/miniserver_8cpp_source.html#l01035">1035</a> of file <a class="el" href="../../d5/db2/miniserver_8cpp_source.html">miniserver.cpp</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/db2/miniserver_8cpp_a569fe15e9cbb156f31065a8b7ac12799_icgraph.png" border="0" usemap="#ad5/db2/miniserver_8cpp_a569fe15e9cbb156f31065a8b7ac12799_icgraph" alt=""/></div>
<map name="ad5/db2/miniserver_8cpp_a569fe15e9cbb156f31065a8b7ac12799_icgraph" id="ad5/db2/miniserver_8cpp_a569fe15e9cbb156f31065a8b7ac12799_icgraph">
<area shape="rect" title="Set SOAP Callback." alt="" coords="325,5,456,31"/>
<area shape="rect" href="../../d4/d99/upnpapi_8cpp.html#a4c19962b251af8c60bf7f40309e79ba0" title="Performs the initial steps in initializing the UPnP SDK." alt="" coords="139,5,277,31"/>
<area shape="poly" title=" " alt="" coords="311,21,278,21,278,15,311,15"/>
<area shape="rect" href="../../d7/df3/group__compaAPI-Addressing.html#ga91ebefb4f6d49c62cb37b418fae2ed7f" title="Initializes the Linux SDK for UPnP Devices." alt="" coords="5,5,91,31"/>
<area shape="poly" title=" " alt="" coords="125,21,91,21,91,15,125,15"/>
</map>
</div>

</div>
</div>
<a id="af500b18ad2a00dd3c3fa6da8ce62369d" name="af500b18ad2a00dd3c3fa6da8ce62369d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af500b18ad2a00dd3c3fa6da8ce62369d">&#9670;&#160;</a></span>SetGenaCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetGenaCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d8b/miniserver_8hpp.html#a3f28f3a60a8a50e6fb3a27904c32dde6">MiniServerCallback</a>&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set GENA Callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>GENA Callback to be invoked. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/db2/miniserver_8cpp_source.html#l01042">1042</a> of file <a class="el" href="../../d5/db2/miniserver_8cpp_source.html">miniserver.cpp</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/db2/miniserver_8cpp_af500b18ad2a00dd3c3fa6da8ce62369d_icgraph.png" border="0" usemap="#ad5/db2/miniserver_8cpp_af500b18ad2a00dd3c3fa6da8ce62369d_icgraph" alt=""/></div>
<map name="ad5/db2/miniserver_8cpp_af500b18ad2a00dd3c3fa6da8ce62369d_icgraph" id="ad5/db2/miniserver_8cpp_af500b18ad2a00dd3c3fa6da8ce62369d_icgraph">
<area shape="rect" title="Set GENA Callback." alt="" coords="325,5,459,31"/>
<area shape="rect" href="../../d4/d99/upnpapi_8cpp.html#a4c19962b251af8c60bf7f40309e79ba0" title="Performs the initial steps in initializing the UPnP SDK." alt="" coords="139,5,277,31"/>
<area shape="poly" title=" " alt="" coords="312,21,278,21,278,15,312,15"/>
<area shape="rect" href="../../d7/df3/group__compaAPI-Addressing.html#ga91ebefb4f6d49c62cb37b418fae2ed7f" title="Initializes the Linux SDK for UPnP Devices." alt="" coords="5,5,91,31"/>
<area shape="poly" title=" " alt="" coords="125,21,91,21,91,15,125,15"/>
</map>
</div>

</div>
</div>
<a id="a85c0b17d965bdb9430a9ce2e6931770a" name="a85c0b17d965bdb9430a9ce2e6931770a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85c0b17d965bdb9430a9ce2e6931770a">&#9670;&#160;</a></span>StartMiniServer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StartMiniServer </td>
          <td>(</td>
          <td class="paramtype">in_port_t *&#160;</td>
          <td class="paramname"><em>listen_port4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_port_t *&#160;</td>
          <td class="paramname"><em>listen_port6</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_port_t *&#160;</td>
          <td class="paramname"><em>listen_port6UlaGua</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the sockets functionality for the Miniserver. </p>
<p>Initialize a thread pool job to run the MiniServer and the job to the thread pool. If a listening port is specified to 0, then the port number is dynamically picked. Use timer mechanism to start the MiniServer, failure to meet the allowed delay aborts the attempt to launch the MiniServer.</p>
<p>The three parameter are only used if we have also a webserver built in. The miniserver does not need them.</p>
<p>I use a simple random number generator for unspecified port numbers. This is needed because I do not reuse addresses before TIME_WAIT has expired (socket option SO_REUSEADDR = false). I must use different socket addresses to be able to restart a device immediately without TIME_WAIT and that is already given with different port numbers on the same ip address.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>On success: UPNP_E_SUCCESS<br  />
</li>
<li>On error: UPNP_E_* </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">listen_port4</td><td>Port on which the server listens for incoming IPv4 connections.  </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">listen_port6</td><td>Port on which the server listens for incoming IPv6 LLA connections.  </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">listen_port6UlaGua</td><td>Port on which the server listens for incoming IPv6 ULA or GUA connections. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/db2/miniserver_8cpp_source.html#l01048">1048</a> of file <a class="el" href="../../d5/db2/miniserver_8cpp_source.html">miniserver.cpp</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/db2/miniserver_8cpp_a85c0b17d965bdb9430a9ce2e6931770a_cgraph.png" border="0" usemap="#ad5/db2/miniserver_8cpp_a85c0b17d965bdb9430a9ce2e6931770a_cgraph" alt=""/></div>
<map name="ad5/db2/miniserver_8cpp_a85c0b17d965bdb9430a9ce2e6931770a_cgraph" id="ad5/db2/miniserver_8cpp_a85c0b17d965bdb9430a9ce2e6931770a_cgraph">
<area shape="rect" title="Initialize the sockets functionality for the Miniserver." alt="" coords="5,570,128,595"/>
<area shape="rect" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a7edcadd0e5ba55588d4794730343772e" title="Create STREAM sockets, binds to local network interfaces and listens for incoming connections." alt="" coords="186,207,366,262"/>
<area shape="poly" title=" " alt="" coords="69,569,105,467,135,398,174,332,200,299,229,270,233,273,204,302,178,335,140,401,110,469,74,571"/>
<area shape="rect" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a1eecc466ef68bcf35458b9b5c5ff4d63" title="Creates the miniserver STOP socket, usable to listen for stopping the miniserver." alt="" coords="186,346,366,401"/>
<area shape="poly" title=" " alt="" coords="71,569,108,499,138,456,174,418,191,405,194,410,178,422,142,460,113,502,76,571"/>
<area shape="rect" href="../../d6/df0/sock_8hpp.html#a703577f3b40fc1c9e865b798beab18e5" title="Closes the socket if it is different from &#45;1." alt="" coords="497,451,590,477"/>
<area shape="poly" title=" " alt="" coords="73,568,110,514,139,484,175,462,214,447,255,438,339,432,418,437,483,447,482,453,417,442,339,437,256,444,216,453,177,466,143,488,114,517,77,571"/>
<area shape="rect" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a5d8a62e1d3813dc7cc3bcfca83d918a5" title="Initialize a miniserver Socket Array." alt="" coords="178,477,374,531"/>
<area shape="poly" title=" " alt="" coords="101,567,189,534,191,539,103,572"/>
<area shape="rect" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#a88c84bd3f9b53e2ef2ada57dd21a73b1" title="Check if a network address is numeric." alt="" coords="176,555,376,610"/>
<area shape="poly" title=" " alt="" coords="128,580,162,580,162,585,128,585"/>
<area shape="rect" href="../../d8/d61/ThreadPool_8cpp.html#aea9809ed39a504aecbbdc574b6998604" title="Adds a persistent job to the thread pool." alt="" coords="183,634,369,659"/>
<area shape="poly" title=" " alt="" coords="100,593,177,620,205,628,204,633,175,625,98,598"/>
<area shape="rect" href="../../d8/d61/ThreadPool_8cpp.html#a52970195b2e114427c2b456773bce4c3" title="Initializes thread pool job." alt="" coords="237,683,315,709"/>
<area shape="poly" title=" " alt="" coords="82,594,122,632,148,652,177,670,224,686,222,691,175,674,145,657,118,636,78,598"/>
<area shape="rect" href="../../d8/d61/ThreadPool_8cpp.html#a249dd5d52ce5559d123f3c53651667c7" title="Sets the jobs free function." alt="" coords="195,733,357,758"/>
<area shape="poly" title=" " alt="" coords="77,594,114,655,143,690,178,719,188,725,186,730,174,724,139,694,109,658,72,597"/>
<area shape="rect" href="../../d8/d61/ThreadPool_8cpp.html#a7317f4409e514c2c01e31c9f66fd7da5" title="Sets the priority of the threadpool job." alt="" coords="213,782,339,807"/>
<area shape="poly" title=" " alt="" coords="74,595,86,630,107,677,137,727,156,749,178,768,200,781,198,786,174,773,152,753,133,730,102,680,81,632,69,596"/>
<area shape="rect" href="../../d3/d5d/classUPnPsdk_1_1CSocket.html#ab5fa56659a396746dd2375b8078dea35" title="Bind socket to an ip address." alt="" coords="456,222,631,247"/>
<area shape="poly" title=" " alt="" coords="366,232,442,232,442,237,366,237"/>
<area shape="rect" href="../../d9/da5/classUPnPsdk_1_1CSocket__basic.html#a35082ff3e44ebd5445417509630b9493" title="Get the socket address the socket is bound to." alt="" coords="712,272,892,312"/>
<area shape="poly" title=" " alt="" coords="367,248,424,256,568,271,699,282,698,288,567,277,424,261,366,253"/>
<area shape="rect" href="../../d3/d5d/classUPnPsdk_1_1CSocket.html#a24742cd73c13af749201f468900a257b" title="Set socket to listen." alt="" coords="711,70,893,95"/>
<area shape="poly" title=" " alt="" coords="299,205,352,156,386,131,423,112,492,91,564,78,633,73,697,73,697,78,634,78,564,84,493,96,425,117,389,136,356,160,303,209"/>
<area shape="rect" href="../../dc/df7/structUPnPsdk_1_1SSockaddr.html#a8d4aa24450915e0b20fd30e672e9a660" title="Get the numeric port." alt="" coords="466,5,621,45"/>
<area shape="poly" title=" " alt="" coords="292,205,345,134,381,95,423,62,452,46,454,51,425,66,385,99,349,137,296,208"/>
<area shape="rect" href="../../dd/d3a/classUPnPsdk_1_1CSocketErr.html#a91bdee1763e001634a3b49e7a346a603" title="Catch error for later use." alt="" coords="941,232,1099,272"/>
<area shape="poly" title=" " alt="" coords="631,235,928,246,928,251,631,240"/>
<area shape="rect" href="../../dd/d3a/classUPnPsdk_1_1CSocketErr.html#ac33bc7561a105383c0e9d951b3b5e3f6" title="Get human readable error description of the catched error." alt="" coords="941,147,1099,187"/>
<area shape="poly" title=" " alt="" coords="631,220,927,177,928,182,631,225"/>
<area shape="poly" title=" " alt="" coords="602,245,699,267,698,272,601,250"/>
<area shape="poly" title=" " alt="" coords="892,273,927,266,928,271,893,278"/>
<area shape="poly" title=" " alt="" coords="837,270,971,191,974,196,839,274"/>
<area shape="poly" title=" " alt="" coords="820,94,943,197,978,222,975,226,940,201,816,98"/>
<area shape="poly" title=" " alt="" coords="842,93,894,112,960,139,958,144,892,117,840,98"/>
<area shape="poly" title=" " alt="" coords="767,72,759,62,763,52,778,46,802,43,832,47,844,56,841,60,830,52,802,49,779,51,767,56,764,61,771,68"/>
<area shape="poly" title=" " alt="" coords="366,368,649,354,791,341,849,332,893,321,939,302,980,277,982,282,941,306,894,327,850,337,792,346,649,360,367,374"/>
<area shape="poly" title=" " alt="" coords="305,344,374,272,387,253,395,236,405,221,423,207,485,178,552,157,620,144,689,137,756,135,819,137,928,148,927,153,819,142,756,140,689,142,621,149,553,162,487,183,425,212,409,225,399,239,391,256,378,275,308,348"/>
<area shape="rect" href="../../d9/d9e/namespaceanonymous__namespace_02miniserver_8cpp_03.html#aec7d02e7e42098f68ed2d85b931106df" title="Returns port to which socket, sockfd, is bound." alt="" coords="443,387,644,427"/>
<area shape="poly" title=" " alt="" coords="367,382,429,390,428,395,366,387"/>
<area shape="poly" title=" " alt="" coords="337,398,425,436,484,451,482,456,423,441,335,403"/>
<area shape="rect" href="../../dd/d01/namespaceanonymous__namespace_02ThreadPool_8cpp_03.html#a46f849090972378290838f067b7d80a4" title="Creates a Thread Pool Job. (Dynamically allocated)" alt="" coords="424,583,663,638"/>
<area shape="poly" title=" " alt="" coords="368,632,410,626,411,631,369,637"/>
<area shape="rect" href="../../dd/d01/namespaceanonymous__namespace_02ThreadPool_8cpp_03.html#ac4a17fd416d9ffc3692f99834066d1c3" title="Creates a worker thread, if the thread pool does not already have max threads." alt="" coords="424,663,663,703"/>
<area shape="poly" title=" " alt="" coords="369,656,411,662,410,667,368,662"/>
</map>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/db2/miniserver_8cpp_a85c0b17d965bdb9430a9ce2e6931770a_icgraph.png" border="0" usemap="#ad5/db2/miniserver_8cpp_a85c0b17d965bdb9430a9ce2e6931770a_icgraph" alt=""/></div>
<map name="ad5/db2/miniserver_8cpp_a85c0b17d965bdb9430a9ce2e6931770a_icgraph" id="ad5/db2/miniserver_8cpp_a85c0b17d965bdb9430a9ce2e6931770a_icgraph">
<area shape="rect" title="Initialize the sockets functionality for the Miniserver." alt="" coords="344,5,467,31"/>
<area shape="rect" href="../../d4/d99/upnpapi_8cpp.html#a679257c76bd4ebdd2aa3fa2bb470dadd" title="Finishes initializing the UPnP SDK." alt="" coords="139,5,296,31"/>
<area shape="poly" title=" " alt="" coords="330,21,296,21,296,15,330,15"/>
<area shape="rect" href="../../d7/df3/group__compaAPI-Addressing.html#ga91ebefb4f6d49c62cb37b418fae2ed7f" title="Initializes the Linux SDK for UPnP Devices." alt="" coords="5,5,91,31"/>
<area shape="poly" title=" " alt="" coords="125,21,91,21,91,15,125,15"/>
</map>
</div>

</div>
</div>
<a id="ac0223038b7afa1e3ea3d7cec983ccc63" name="ac0223038b7afa1e3ea3d7cec983ccc63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0223038b7afa1e3ea3d7cec983ccc63">&#9670;&#160;</a></span>StopMiniServer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StopMiniServer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop and Shutdown the MiniServer and free socket resources. </p>
<dl class="section return"><dt>Returns</dt><dd>Always returns 0. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/db2/miniserver_8cpp_source.html#l01162">1162</a> of file <a class="el" href="../../d5/db2/miniserver_8cpp_source.html">miniserver.cpp</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/db2/miniserver_8cpp_ac0223038b7afa1e3ea3d7cec983ccc63_cgraph.png" border="0" usemap="#ad5/db2/miniserver_8cpp_ac0223038b7afa1e3ea3d7cec983ccc63_cgraph" alt=""/></div>
<map name="ad5/db2/miniserver_8cpp_ac0223038b7afa1e3ea3d7cec983ccc63_cgraph" id="ad5/db2/miniserver_8cpp_ac0223038b7afa1e3ea3d7cec983ccc63_cgraph">
<area shape="rect" title="Stop and Shutdown the MiniServer and free socket resources." alt="" coords="5,31,127,56"/>
<area shape="rect" href="../../d6/df0/sock_8hpp.html#a703577f3b40fc1c9e865b798beab18e5" title="Closes the socket if it is different from &#45;1." alt="" coords="175,5,268,31"/>
<area shape="poly" title=" " alt="" coords="126,31,161,25,162,30,127,36"/>
<area shape="rect" href="../../d5/dfa/upnpdebug_8cpp.html#afe489651d95ecf91dd452cdb2d5497c3" title="Prints the debug statement." alt="" coords="176,55,267,80"/>
<area shape="poly" title=" " alt="" coords="127,50,163,56,162,61,126,55"/>
<area shape="rect" href="../../d5/dfa/upnpdebug_8cpp.html#adee8b149b1dca33417740b21a862ad00" title="Check Debug level." alt="" coords="336,29,476,55"/>
<area shape="poly" title=" " alt="" coords="266,59,322,51,322,56,267,64"/>
<area shape="rect" href="../../d5/dfa/upnpdebug_8cpp.html#a4190a252f156f35bad0781b542cea98d" title="Display File and Line." alt="" coords="316,79,496,104"/>
<area shape="poly" title=" " alt="" coords="267,70,303,75,302,80,266,76"/>
</map>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/db2/miniserver_8cpp_ac0223038b7afa1e3ea3d7cec983ccc63_icgraph.png" border="0" usemap="#ad5/db2/miniserver_8cpp_ac0223038b7afa1e3ea3d7cec983ccc63_icgraph" alt=""/></div>
<map name="ad5/db2/miniserver_8cpp_ac0223038b7afa1e3ea3d7cec983ccc63_icgraph" id="ad5/db2/miniserver_8cpp_ac0223038b7afa1e3ea3d7cec983ccc63_icgraph">
<area shape="rect" title="Stop and Shutdown the MiniServer and free socket resources." alt="" coords="692,31,813,56"/>
<area shape="rect" href="../../d4/d99/upnpapi_8cpp.html#a75a3c9f9180bc908e17d49c3e2218e99" title="Terminates the Linux SDK for UPnP Devices." alt="" coords="549,31,644,56"/>
<area shape="poly" title=" " alt="" coords="678,46,644,46,644,41,678,41"/>
<area shape="rect" href="../../d7/df3/group__compaAPI-Addressing.html#ga91ebefb4f6d49c62cb37b418fae2ed7f" title="Initializes the Linux SDK for UPnP Devices." alt="" coords="5,31,91,56"/>
<area shape="poly" title=" " alt="" coords="536,33,501,28,399,16,320,9,240,10,139,21,86,34,85,28,138,16,240,5,320,4,400,10,502,22,536,28"/>
<area shape="rect" href="../../d4/d99/upnpapi_8cpp.html#a4c19962b251af8c60bf7f40309e79ba0" title="Performs the initial steps in initializing the UPnP SDK." alt="" coords="148,31,287,56"/>
<area shape="poly" title=" " alt="" coords="536,46,287,46,287,41,536,41"/>
<area shape="rect" href="../../d4/d99/upnpapi_8cpp.html#a679257c76bd4ebdd2aa3fa2bb470dadd" title="Finishes initializing the UPnP SDK." alt="" coords="139,80,296,106"/>
<area shape="poly" title=" " alt="" coords="568,66,537,84,502,97,449,106,395,110,296,106,296,101,395,105,448,101,501,92,535,79,565,62"/>
<area shape="rect" href="../../d4/d99/upnpapi_8cpp.html#aabf66e54504de499079a21f1d01b91ca" title="Initializes the global threadm pools used by the UPnP SDK." alt="" coords="344,56,501,82"/>
<area shape="poly" title=" " alt="" coords="536,55,502,60,501,55,535,50"/>
<area shape="poly" title=" " alt="" coords="134,46,91,46,91,41,134,41"/>
<area shape="poly" title=" " alt="" coords="159,79,90,59,92,53,161,74"/>
<area shape="poly" title=" " alt="" coords="330,60,287,55,288,50,330,55"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_71746572e519a5ccd4e3b0176757c048.html">Compa</a></li><li class="navelem"><a class="el" href="../../dir_185e5737dee257d2bd62c4d45a2734a7.html">src</a></li><li class="navelem"><a class="el" href="../../dir_bb5292df3266362004a9a948a17accc5.html">genlib</a></li><li class="navelem"><a class="el" href="../../dir_9409973b4cc4d86f9d6fdf350ba860e2.html">miniserver</a></li><li class="navelem"><a class="el" href="../../d5/db2/miniserver_8cpp.html">miniserver.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
